{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Stefan Robu\\\\OneDrive\\\\Desktop\\\\school\\\\anul 3\\\\TD\\\\TD-front-back-BD\\\\CasinoAPI\\\\Frontend\\\\src\\\\components\\\\Retragere.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Retragere = ({\n  onSoldUpdate\n}) => {\n  _s();\n  const [suma, setSuma] = useState(0);\n  const [cardId, setCardId] = useState('');\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const retrageBani = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setError('Nu ești autentificat.');\n      return;\n    }\n    if (suma <= 0) {\n      setError('Suma trebuie să fie pozitivă.');\n      return;\n    }\n    if (cardId.trim().length < 4) {\n      setError('ID Card invalid.');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    setSuccess(null);\n    try {\n      const res = await fetch('https://localhost:7201/api/Casino/retragere', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          suma\n        }) // doar suma, conform backend\n      });\n      if (res.status === 401) {\n        setError('Sesiunea a expirat. Te rugăm să te autentifici din nou.');\n        localStorage.removeItem('token');\n        // eventual redirect către login\n        return;\n      }\n      if (!res.ok) {\n        const msg = await res.text();\n        setError(`Eroare: ${msg}`);\n        setLoading(false);\n        return;\n      }\n      const result = await res.json();\n      setSuccess(`Retragere efectuată. Sold nou: ${result.soldNou.toFixed(2)} RON`);\n      onSoldUpdate(result.soldNou);\n      setSuma(0);\n      setCardId('');\n    } catch (err) {\n      console.error(err);\n      setError('Eroare la conectare cu serverul.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Retragere Fonduri\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '0.5rem',\n        marginBottom: '1rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Sum\\u0103\",\n        value: suma,\n        onChange: e => setSuma(Number(e.target.value) || 0),\n        min: 0,\n        style: {\n          padding: '0.4rem',\n          borderRadius: '6px',\n          border: '1px solid #ccc'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"ID Card\",\n        value: cardId,\n        onChange: e => setCardId(e.target.value),\n        style: {\n          padding: '0.4rem',\n          borderRadius: '6px',\n          border: '1px solid #ccc'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: retrageBani,\n        disabled: loading,\n        style: {\n          padding: '0.5rem 1rem',\n          backgroundColor: '#059669',\n          color: 'white',\n          border: 'none',\n          borderRadius: '6px',\n          cursor: 'pointer',\n          fontWeight: '600'\n        },\n        children: loading ? 'Se procesează...' : 'Retrage'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'green'\n      },\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n};\n_s(Retragere, \"Y2r9IU96y/ADkjOpCcA6ozgTvrw=\");\n_c = Retragere;\nexport default Retragere;\nvar _c;\n$RefreshReg$(_c, \"Retragere\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","Retragere","onSoldUpdate","_s","suma","setSuma","cardId","setCardId","error","setError","success","setSuccess","loading","setLoading","retrageBani","token","localStorage","getItem","trim","length","res","fetch","method","headers","Authorization","body","JSON","stringify","status","removeItem","ok","msg","text","result","json","soldNou","toFixed","err","console","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","flexDirection","gap","marginBottom","type","placeholder","value","onChange","e","Number","target","min","padding","borderRadius","border","onClick","disabled","backgroundColor","color","cursor","fontWeight","_c","$RefreshReg$"],"sources":["C:/Users/Stefan Robu/OneDrive/Desktop/school/anul 3/TD/TD-front-back-BD/CasinoAPI/Frontend/src/components/Retragere.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\ninterface RetragereProps {\r\n  onSoldUpdate: (newSold: number) => void;\r\n}\r\n\r\nconst Retragere: React.FC<RetragereProps> = ({ onSoldUpdate }) => {\r\n  const [suma, setSuma] = useState<number>(0);\r\n  const [cardId, setCardId] = useState('');\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const retrageBani = async () => {\r\n  const token = localStorage.getItem('token');\r\n  if (!token) {\r\n    setError('Nu ești autentificat.');\r\n    return;\r\n  }\r\n  \r\n\r\n  if (suma <= 0) {\r\n    setError('Suma trebuie să fie pozitivă.');\r\n    return;\r\n  }\r\n\r\n  if (cardId.trim().length < 4) {\r\n    setError('ID Card invalid.');\r\n    return;\r\n  }\r\n\r\n  setLoading(true);\r\n  setError(null);\r\n  setSuccess(null);\r\n\r\n  try {\r\n    const res = await fetch('https://localhost:7201/api/Casino/retragere', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      body: JSON.stringify({suma}), // doar suma, conform backend\r\n    });\r\nif (res.status === 401) {\r\n  setError('Sesiunea a expirat. Te rugăm să te autentifici din nou.');\r\n  localStorage.removeItem('token');\r\n  // eventual redirect către login\r\n  return;\r\n}\r\n    if (!res.ok) {\r\n      const msg = await res.text();\r\n      setError(`Eroare: ${msg}`);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const result = await res.json();\r\n    setSuccess(`Retragere efectuată. Sold nou: ${result.soldNou.toFixed(2)} RON`);\r\n    onSoldUpdate(result.soldNou);\r\n    setSuma(0);\r\n    setCardId('');\r\n  } catch (err) {\r\n    console.error(err);\r\n    setError('Eroare la conectare cu serverul.');\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n  return (\r\n    <div>\r\n      <h3>Retragere Fonduri</h3>\r\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem', marginBottom: '1rem' }}>\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Sumă\"\r\n          value={suma}\r\n         onChange={(e) => setSuma(Number(e.target.value) || 0)}\r\n          min={0}\r\n          style={{ padding: '0.4rem', borderRadius: '6px', border: '1px solid #ccc' }}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"ID Card\"\r\n          value={cardId}\r\n          onChange={(e) => setCardId(e.target.value)}\r\n          style={{ padding: '0.4rem', borderRadius: '6px', border: '1px solid #ccc' }}\r\n        />\r\n        <button\r\n          onClick={retrageBani}\r\n          disabled={loading}\r\n          style={{\r\n            padding: '0.5rem 1rem',\r\n            backgroundColor: '#059669',\r\n            color: 'white',\r\n            border: 'none',\r\n            borderRadius: '6px',\r\n            cursor: 'pointer',\r\n            fontWeight: '600',\r\n          }}\r\n        >\r\n          {loading ? 'Se procesează...' : 'Retrage'}\r\n        </button>\r\n      </div>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n      {success && <p style={{ color: 'green' }}>{success}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Retragere;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}